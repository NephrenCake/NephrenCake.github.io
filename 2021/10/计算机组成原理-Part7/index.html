<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>计算机组成原理-Part7 | 浅幽丶奈芙莲的个人博客</title><meta name="author" content="NephrenCake"><meta name="copyright" content="NephrenCake"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="IO 系统">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机组成原理-Part7">
<meta property="og:url" content="https://nephrencake.github.io/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/index.html">
<meta property="og:site_name" content="浅幽丶奈芙莲的个人博客">
<meta property="og:description" content="IO 系统">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://nephrencake.github.io/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-%E5%AE%8C%E7%BB%93%E7%9B%AE%E5%BD%95/%E4%BA%8Ced11.jpg">
<meta property="article:published_time" content="2021-10-02T02:53:29.000Z">
<meta property="article:modified_time" content="2021-11-15T04:45:50.444Z">
<meta property="article:author" content="NephrenCake">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://nephrencake.github.io/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-%E5%AE%8C%E7%BB%93%E7%9B%AE%E5%BD%95/%E4%BA%8Ced11.jpg"><link rel="shortcut icon" href="/img/favicon.jpg"><link rel="canonical" href="https://nephrencake.github.io/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '计算机组成原理-Part7',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-11-15 12:45:50'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/background.css"><link rel="stylesheet" href="/css/mouse.css"><link rel="stylesheet" href="/css/scrollbar.css"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/iconfont.css"><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="浅幽丶奈芙莲的个人博客" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">103</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">18</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/photo/"><i class="fa-fw fas fa-heart"></i><span> 相册</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-%E5%AE%8C%E7%BB%93%E7%9B%AE%E5%BD%95/%E4%BA%8Ced11.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">浅幽丶奈芙莲的个人博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/photo/"><i class="fa-fw fas fa-heart"></i><span> 相册</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">计算机组成原理-Part7</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-10-02T02:53:29.000Z" title="发表于 2021-10-02 10:53:29">2021-10-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-11-15T04:45:50.444Z" title="更新于 2021-11-15 12:45:50">2021-11-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/">计算机组成原理</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>20分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="计算机组成原理-Part7"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="计算机组成原理-Part7——I-O-系统"><a href="#计算机组成原理-Part7——I-O-系统" class="headerlink" title="计算机组成原理-Part7——I/O 系统"></a>计算机组成原理-Part7——I/O 系统</h1><p>[TOC]</p>
<h2 id="I-O-系统基本概念"><a href="#I-O-系统基本概念" class="headerlink" title="I/O 系统基本概念"></a>I/O 系统基本概念</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><ul>
<li>I/O 设备：可以将数据输入到计算机，或者可以接收计算机输出数据的外部设备，包括<strong>输入设备、输出设备、外存设备</strong>。</li>
<li>I/O 接口：又称 I/O 控制器（I/O Controller）、设备控制器，负责协调主机与外部设备之间的数据传输<ul>
<li>I/O 控制器就是一块芯片，常被集成在主板上</li>
<li>现在的 I/O 接口（芯片）也会被集成在南桥芯片内部</li>
</ul>
</li>
<li>数据流：键盘 -&gt; I/O 接口的数据寄存器 -&gt; 数据总线 -&gt; CPU某寄存器 -&gt; 主存（变量 i 的对应位置）</li>
</ul>
<h3 id="控制方式"><a href="#控制方式" class="headerlink" title="控制方式"></a>控制方式</h3><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211028202903178.png" alt="image-20211028202903178" style="zoom:80%;">

<ul>
<li><strong>程序查询方式</strong>：CPU 不断轮询检查 I/O 控制器中的“状态寄存器”，<strong>直到检测到状态为“已完成”之后</strong>，才从数据寄存器取出输入数据（如程序中的输入等待）</li>
<li><strong>程序中断方式</strong>：等待键盘 I/O 时 CPU 可以先去执行其他程序，<strong>键盘 I/O 完成后 I/O 控制器向 CPU 发出中断请求，CPU 响应中断请求</strong>，并取走输入数据</li>
<li><strong>DMA 控制方式</strong>：主存与高速 I/O 设备之间有一条直接数据通路（DMA总线）。CPU 向 DMA 接口发出“读/写”命令，并指明主存地址、磁盘地址、读写数据量等参数。<ul>
<li>DMA 控制器自动控制磁盘与主存的数据读写，<strong>DMA 控制器与主存每次传送1个字</strong>，<strong>每当完成一整块数据读写</strong>（如 1KB 为一整块） ，才向 CPU 发出一次中断请求。</li>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211027224155076.png" alt="image-20211027224155076" style="zoom:80%;"></li>
</ul>
</li>
<li><strong>通道控制方式</strong>：相比 DMA 控制方式，不仅不与高速外设进行直接相连，包括低速外设都交由通道来管理，且通道程序保存在内存中。<ul>
<li>针对场景：I/O 密集型场景</li>
<li>通道：可以理解为是“弱鸡版的 CPU”。通道可以识别并执行一系列通道指令，通道指令种类、功能通常比较单一</li>
<li>步骤：<ol>
<li>CPU 向通道发出 I/O 指令。指明通道程序在内存中的位置，并指明要操作的是哪个 I/O 设备。CPU 就可以去做其他事情</li>
<li>通道执行内存中的通道程序，控制 I/O 设备完成一系列任务</li>
<li>通道执行完规定的任务后，向 CPU 发出中断请求，之后 CPU 对中断进行处理</li>
</ol>
</li>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211027224229248.png" alt="image-20211027224229248" style="zoom:80%;">

</li>
</ul>
</li>
</ul>
<h3 id="系统基本组成"><a href="#系统基本组成" class="headerlink" title="系统基本组成"></a>系统基本组成</h3><ul>
<li>一般来说，I/O 系统由 I/O 软件和 I/O 硬件两部分构成。</li>
<li>I/O 硬件：包括外部<strong>设备、I/O 接口 、I/O 总线</strong>等。</li>
<li>I/O 软件：包括<strong>驱动程序、用户程序、管理程序、升级补丁</strong>等。通常采用 <strong>I/O 指令</strong>和<strong>通道指令</strong>实现信息交换。<ul>
<li>I/O 指令：CPU 指令的一部分<ul>
<li>操作码（CPU 对 IO 接口做什么）+ 命令码（IO 接口对设备做什么）+ 设备码（对哪个设备进行操作）</li>
</ul>
</li>
<li>通道指令：通道能识别的指令（提前编制好放在主存中）<ul>
<li>在含有通道的计算机中，CPU 执行 I/O 指令对通道发出命令，由通道执行一系列通道指令，代替 CPU 对 I/O 设备进行管理</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="外部设备"><a href="#外部设备" class="headerlink" title="外部设备"></a>外部设备</h2><h3 id="总览"><a href="#总览" class="headerlink" title="总览"></a>总览</h3><ul>
<li>外部设备<ul>
<li>输入设备<ul>
<li>用于向计算机系统输入命令和文本、数据等信息的部件。</li>
<li>键盘、鼠标</li>
</ul>
</li>
<li>输出设备<ul>
<li>用于将计算机系统中的信息输出到计算机外部进行显示、交换等的部件。</li>
<li>显示器、打印机</li>
</ul>
</li>
<li>外存储器（考点：磁盘存取时间的计算）<ul>
<li>指除计算机内存及CPU缓存等以外的存储器。</li>
<li>磁盘存储器、磁盘阵列、光盘存储器、SSD</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="显示器"><a href="#显示器" class="headerlink" title="显示器"></a>显示器</h3><h4 id="性能标准（考点：显存的计算）"><a href="#性能标准（考点：显存的计算）" class="headerlink" title="性能标准（考点：显存的计算）"></a>性能标准（考点：显存的计算）</h4><ul>
<li>屏幕大小：以对角线长度表示，常用的有 12～29 英寸等。</li>
<li>分辨率：所能表示的像素个数，<strong>宽、高的像素的乘积</strong>，如1920×1280。</li>
<li>灰度级：显示的像素点的亮暗差别，典型的有 8 位（256级）、16 位等。<strong>n 位可以表示 2^n^ 种不同的亮度或颜色</strong>。</li>
<li>刷新：单位时间内扫描整个屏幕内容的次数，通常显示器刷新频率在 60～120 Hz。</li>
<li>显示存储器（VRAM）：<ul>
<li>也称刷新存储器，<strong>显存</strong>。由图像分辨率和灰度级决定，分辨率越高，灰度级越多，刷新存储器容量越大。</li>
<li>显存除了作为当前显示帧的缓存，还会用于保存用于渲染的图像数据，如 3D 模型。</li>
<li>集成显卡计算机中，通常分配一片内存作为显存</li>
<li><strong>VRAM 容量 = 分辨率 × 灰度级位数</strong><ul>
<li>例：1440 × 900 × 3 B ≈ 3.7MB（最低工作要求，能够存储一帧图像的信息）</li>
</ul>
</li>
<li><strong>VRAM 带宽 = 分辨率 × 灰度级位数 × 帧频</strong><ul>
<li>例：3.7 × 60 Hz = 222MB/s</li>
</ul>
</li>
</ul>
</li>
<li>显示器分类<ul>
<li>阴极射线管（CRT）显示器</li>
<li>液晶（LCD）显示器</li>
<li>发光二极管（LED）显示器</li>
</ul>
</li>
</ul>
<h4 id="阴极射线管显示器（考点：字符点阵的存储）"><a href="#阴极射线管显示器（考点：字符点阵的存储）" class="headerlink" title="阴极射线管显示器（考点：字符点阵的存储）"></a>阴极射线管显示器（考点：字符点阵的存储）</h4><p>按显示信息内容不同可分为</p>
<ul>
<li><strong>字符显示器</strong>（计算器）</li>
<li>图形显示器（特别用途设备）<ul>
<li>优点：分辨率高且显示的曲线平滑。</li>
<li>缺点：当显示复杂图形时，会有闪烁感。</li>
</ul>
</li>
<li>图像显示器（用户友好界面）</li>
</ul>
<p>字符显示器：</p>
<ul>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211028115857070.png" alt="image-20211028115857070"></li>
<li>显示字符的方法以点阵为基础。<ul>
<li><strong>点阵是指由 m×n 个点组成的阵列</strong>。</li>
<li>点阵的多少取决于显示<strong>字符的质量</strong>和<strong>字符窗口</strong>的大小。<ul>
<li><strong>字符窗口是指每个字符在屏幕上所占的点数</strong>，包括字符显示点阵和字符间隔。</li>
</ul>
</li>
</ul>
</li>
<li>对应于每个字符窗口，所需显示<strong>字符的 ASCII 代码被存放在视频存储器 VRAM</strong> 中，以备刷新。</li>
<li>将<strong>点阵存入由 ROM 构成的字符发生器</strong>中，在 CRT 进行光栅扫描的过程中，从字符发生器中依次读出某个字符的点阵，按照点阵中 0 和 1 代码不同控制扫描电子束的开或关，从而在屏幕上显示出字符。<ul>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211028115930559.png" alt="image-20211028115930559" style="zoom:80%;"></li>
<li>按扫描方式不同可分为<ul>
<li>光栅扫描显示器</li>
<li>随机扫描显示器</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="打印机"><a href="#打印机" class="headerlink" title="打印机"></a>打印机</h3><ul>
<li>按印字原理不同可分为<ul>
<li><strong>击打式打印机</strong>：利用机械动作使印字机构与色带和纸相撞而打印字符<ul>
<li>优：设备成本低 、印字质量好、防伪性好</li>
<li>缺：噪声大、速度慢</li>
</ul>
</li>
<li><strong>非击打式打印机</strong>：采用电、磁、光、喷墨等物理、化学方法来印刷字符<ul>
<li>优：速度快、噪声小</li>
<li>缺：成本高</li>
</ul>
</li>
</ul>
</li>
<li>按打印机工作方式不同可分为<ul>
<li><strong>串行打印机</strong>：逐字打印、速度慢</li>
<li><strong>行式打印机</strong>：逐行打印、速度快</li>
</ul>
</li>
<li>按工作方式可分为<ul>
<li><strong>针式打印机</strong>：<ul>
<li>原理：在联机状态下，主机发出打印命令，经接口、检测和控制电路，间歇驱动纵向送纸和打印头横向移动，同时驱动打印机间歇冲击色带，在纸上打印出所需内容。</li>
<li>特点：擅长多层复写打印，实现各种票据或蜡纸等的打印。工作原理简单，造价低廉，耗材（色带）便宜，但打印分辨率和打印速度不够高。</li>
</ul>
</li>
<li><strong>喷墨式打印机</strong>：<ul>
<li>原理：带电的喷墨雾点经过电极偏转后，直接在纸上形成所需字形。彩色喷墨打印机基于三基色原理，即分别喷射 3 种颜色墨滴，按一定的比例混合出所要求的颜色。</li>
<li>特点：打印噪声小，可实现高质量彩色打印；通常打印速度比针式打印机快；但防水性差，高质量打印需要专用打印纸。</li>
</ul>
</li>
<li><strong>激光打印机</strong>：<ul>
<li>原理：计算机输出的二进制信息，经过调制后的激光束扫描，在感光鼓上形成潜像，再经过显影、转印和定影，便在纸上得到所需的字符或图像。</li>
<li>特点：打印质量高、速度快、噪声小、处理能力强；但耗材多、价格较贵、不能复写打印多份，且对纸张的要求高。感光鼓（也称为硒鼓）是激光打印机的核心部件。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="外部存储器"><a href="#外部存储器" class="headerlink" title="外部存储器"></a>外部存储器</h3><h4 id="磁表面存储器简介"><a href="#磁表面存储器简介" class="headerlink" title="磁表面存储器简介"></a>磁表面存储器简介</h4><ul>
<li>磁表面存储器，是指把<strong>磁性材料</strong>薄薄地涂在金属铝或塑料表面上作为载磁体来存储信息。磁盘存储器、磁带存储器和磁鼓存储器均属于磁表面存储器。</li>
<li>磁表面存储器的优点：<ul>
<li>存储容量大，位价格低； </li>
<li>记录介质可以重复使用；</li>
<li>记录信息可以长期保存而不丢失，甚至可以脱机存档； </li>
<li>非破坏性读出，读出时不需要再生。</li>
</ul>
</li>
<li>磁表面存储器的缺点：<ul>
<li>存取速度慢；</li>
<li>机械结构复杂；</li>
<li>对工作环境要求较高。</li>
</ul>
</li>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211028122201199.png" alt="image-20211028122201199"></li>
<li>原理：当磁头和磁性记录介质有相对运动时，通过电磁转换（/切割磁感线）完成读/写操作。</li>
<li>编码方法：按某种方案，把一串二进制信息变换成存储介质磁层中一个磁化翻转状态的序列。</li>
<li>磁记录方式：通常采用调频制（FM）和改进型调频制（MFM）的记录方式。</li>
</ul>
<h4 id="磁盘设备"><a href="#磁盘设备" class="headerlink" title="磁盘设备"></a>磁盘设备</h4><h5 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h5><ul>
<li>硬盘存储器<ul>
<li>硬盘存储器由磁盘驱动器、磁盘控制器和盘片组成。</li>
<li>磁盘驱动器：核心部件是磁头组件（磁头移动臂）和盘片组件（驱动轴盘片），温彻斯特盘是一种可移动头固定盘片的硬盘存储器。</li>
<li>磁盘控制器：是硬盘存储器和主机的接口，主流的标准有 IDE、SCSI、SATA 等。</li>
</ul>
</li>
<li>存储区域：<ul>
<li><strong>一块硬盘</strong>含有<strong>若干个盘片</strong>；（即有好几个盘）</li>
<li><strong>每个盘片</strong>可以有 1 或 2 面<strong>盘面</strong>；（即磁盘的正反面都可以利用，每个盘面对应 1 个磁头）</li>
<li><strong>每个记录面</strong>划分为<strong>若干条磁道</strong>；（<strong>所有记录面上的同一条磁道组成一个柱面</strong>）</li>
<li>而<strong>每条磁道</strong>又划分为<strong>若干个扇区</strong>；（切蛋糕）</li>
<li><strong>扇区（也称块）是磁盘读写的最小单位</strong>，也就是说磁盘<strong>按块存取</strong>。</li>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211028124407864.png" alt="image-20211028124407864"></li>
</ul>
</li>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211028124733827.png" alt="image-20211028124733827"></li>
</ul>
<h5 id="性能指标"><a href="#性能指标" class="headerlink" title="性能指标"></a>性能指标</h5><ul>
<li>磁盘的容量：一个磁盘所能存储的字节总数称为磁盘容量。磁盘容量有非格式化容量和格式化容量之分。<ul>
<li>非格式化容量：指磁记录表面理论氪用的磁化单元总数。</li>
<li>格式化容量：指按照某种特定的记录格式后所能利用、存储的信息总量。</li>
</ul>
</li>
<li>记录密度：记录密度是指盘片单位面积上记录的二进制的信息量，通常以道密度、位密度和面密度表示。<ul>
<li>道密度：沿磁盘半径方向单位长度上的磁道数；</li>
<li>位密度：一条磁道单位长度上能记录的二进制代码位数；</li>
<li>面密度：位密度和道密度的乘积。</li>
<li>注意：磁盘所有磁道记录的信息量一定是相等的，并不是圆越大信息越多，故<strong>越内侧的磁道位密度越大</strong>。</li>
</ul>
</li>
<li>平均存取时间：<ul>
<li><code>平均存取时间 = 磁盘控制器延迟（可能会有）+ 寻道时间（磁头移动到目的磁道）+ 旋转延迟时间（磁头定位到所在扇区）+ 传输时间（传输数据所花费的时间）</code></li>
<li>一般寻道时间会在题中给出，旋转延迟时间可以按数学期望（即转半圈）来计算，同时通过转速也可以确定转一个扇区的时间</li>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211028130946542.png" alt="image-20211028130946542" style="zoom:80%;"></li>
</ul>
</li>
<li>数据传输率：磁盘存储器在单位时间内向主机传送数据的字节数，称为数据传输率。<ul>
<li>假设磁盘转数为 r（转/秒），每条磁道容量为 N 个字节，则数据传输率为 D<del>r</del>=r×N</li>
</ul>
</li>
</ul>
<h5 id="磁盘地址"><a href="#磁盘地址" class="headerlink" title="磁盘地址"></a>磁盘地址</h5><ul>
<li>主机向磁盘控制器发送寻址信息，包括<ul>
<li>驱动器号：一台电脑可能有多个硬盘</li>
<li>柱面（磁道）号：移动磁头臂（寻道）</li>
<li>盘面号：激活某个磁头</li>
<li>扇区号：通过旋转将特定扇区划过磁头下方</li>
</ul>
</li>
<li>例：若系统中有 4 个驱动器，每个驱动器带一个磁盘，每个磁盘 256 个磁道、16 个盘面，每个盘面划分为 16个扇区，则每个扇区地址要 18 位二进制代码<ul>
<li>驱动器号（2bit）+ 柱面（磁道）号（8bit）+ 盘面号（4bit）+ 扇区号（4bit） </li>
</ul>
</li>
</ul>
<h5 id="硬盘的工作过程"><a href="#硬盘的工作过程" class="headerlink" title="硬盘的工作过程"></a>硬盘的工作过程</h5><ul>
<li>硬盘的主要操作是<strong>寻址、读盘、写盘</strong>。每个操作都对应一个控制字，硬盘工作时，第一步是取控制字，第二步是执行控制字。</li>
<li>硬盘属于机械式部件，其读写操作是串行的，不可能在同一时刻既读又写，也不可能在同一时刻读两组数据或写两组数据。</li>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211028150614567.png" alt="image-20211028150614567" style="zoom:80%;">

</li>
</ul>
<h4 id="磁盘阵列"><a href="#磁盘阵列" class="headerlink" title="磁盘阵列"></a>磁盘阵列</h4><ul>
<li>RAID（ Redundant Array of Inexpensive Disks，廉价冗余磁盘阵列）是将多个独立的物理磁盘组成一个独立的逻辑盘，数据在多个物理盘上分割交叉存储、并行访问，具有更好的存储性能、可靠性和安全性。</li>
<li>RAID 有 RAID1～RAID5 的几种方案，无论何时有磁盘损坏，都可以随时拔出受损的磁盘再插入好的磁盘，而数据不会损坏。（raid 数越高，冗余越少、越稳定）<ul>
<li>RAID0：无冗余和无校验的磁盘阵列。（条带化，提高存取速度，没有容错能力）</li>
<li>RAID1：镜像磁盘阵列。（镜像磁盘互为备份，容量减少一半）</li>
<li>RAID2：采用纠错的海明码的磁盘阵列。（开始通过数据校验提高容错能力）</li>
<li>RAID3：位交叉奇偶校验的磁盘阵列。</li>
<li>RAID4：块交叉奇偶校验的磁盘阵列。</li>
<li>RAID5：无独立校验的奇偶校验磁盘阵列。</li>
</ul>
</li>
<li>RAID 通过同时使用多个磁盘，提高传输率；通过在多个磁盘上并行存取来大幅提高存储系统的数据吞吐量；通过镜像功能，提高安全可靠性；通过数据校验，提供容错能力。</li>
</ul>
<h4 id="光盘存储器"><a href="#光盘存储器" class="headerlink" title="光盘存储器"></a>光盘存储器</h4><ul>
<li>利用光学原理读/写信息的存储装置，采用聚焦激光束对盘式介质以非接触的方式记录信息。</li>
<li>光盘的类型：<ul>
<li>CD-ROM：只读型光盘，只能读出其中内容，不能写入或修改。</li>
<li>CD-R：只可写入一次信息，之后不可修改。</li>
<li>CD-RW：可读可写光盘，可以重复读写。</li>
<li>DVD-ROM：高容量的 CD-ROM，DVD 表示通用数字化多功能光盘。</li>
</ul>
</li>
</ul>
<h4 id="固态硬盘"><a href="#固态硬盘" class="headerlink" title="固态硬盘"></a>固态硬盘</h4><ul>
<li>由 Flash Memory 组成，以及其他硬件和软件的支持。</li>
<li>闪存（Flash Memory）是在 E2PROM 的基础上发展起来的，<strong>本质上是只读存储器</strong>。</li>
</ul>
<h2 id="I-O-接口"><a href="#I-O-接口" class="headerlink" title="I/O 接口"></a>I/O 接口</h2><h3 id="主要功能"><a href="#主要功能" class="headerlink" title="主要功能"></a>主要功能</h3><ul>
<li><strong>数据缓冲</strong>：通过<strong>数据缓冲寄存器</strong>（DBR）达到主机和外设工作速度的匹配</li>
<li><strong>错误或状态监测</strong>：通过<strong>状态寄存器</strong>反馈设备的各种错误、状态信息，供 CPU 查用</li>
<li><strong>控制和定时</strong>：接收从控制总线发来的控制信号、时钟信号</li>
<li><strong>数据格式转换</strong>：“串-并”、“并-串”等格式转换</li>
<li><strong>与主机和设备通信</strong>：实现“主机—I/O接口—I/O设备”之间的通信</li>
</ul>
<h3 id="结构与原理"><a href="#结构与原理" class="headerlink" title="结构与原理"></a>结构与原理</h3><ul>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211028162350702.png" alt="image-20211028162350702" style="zoom: 67%;"><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211028202711609.png" alt="image-20211028202711609" style="zoom:67%;"></li>
<li><strong>内部接口</strong>：内部接口与系统总线相连，实质上是与内存、CPU 相连。</li>
<li><strong>外部接口</strong>：外部接口通过接口电缆与外设相连。外部接口的数据传输可能是串行方式，因此 I/O 接口需具有串/并转换功能。</li>
<li><strong>工作原理</strong>：<ul>
<li>发命令：发送<strong>命令字</strong>到 I/O 控制寄存器，向设备发送命令（需要驱动程序的协助）</li>
<li>读状态：从状态寄存器读取<strong>状态字</strong>，获得设备或 I/O 控制器的状态信息</li>
<li>读/写数据：从数据缓冲寄存器发送或读取数据，完成主机与外设的数据交换</li>
</ul>
</li>
<li>控制寄存器、状态寄存器在<strong>使用时间上错开</strong>，因此有的 I/O 接口中可将二者合二为一</li>
<li><strong>IO 控制器中的一个个寄存器也称为一个个 I/O 端口</strong></li>
</ul>
<h3 id="I-O-端口"><a href="#I-O-端口" class="headerlink" title="I/O 端口"></a>I/O 端口</h3><ul>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211028164339128.png" alt="image-20211028164339128" style="zoom: 67%;"><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211028163713330.png" alt="image-20211028163713330" style="zoom:80%;"></li>
<li><strong>统一编址</strong>：靠不同的<strong>地址码</strong>区分内存和 I/O 设备。<strong>访存类的指令都</strong>可以访问 I/O 端口。又称<strong>存储器映射方式</strong>。<ul>
<li>优点：1. 不需要专门的输入/输出指令，所有访存指令可直接访问端口，程序设计灵活性高；2. 端口有较大的编址空间；3. 读写控制逻辑电路简单</li>
<li>缺点：1. 端口占用了主存地址空间，使主存地址空间变小；2. 外设寻址时间长（地址位数多，地址译码速度慢）</li>
</ul>
</li>
<li><strong>独立编址</strong>：靠不同的<strong>指令</strong>区分内存和 I/O 设备。<strong>只能用专门的 I/O 指令</strong>可以访问 I/O 端口。<ul>
<li>优点：1. 使用专用 I/O 指令，程序编制清晰；2. I/O 端口地址位数少，<strong>地址译码速度快</strong>；3. I/O 端口的地址不占用主存地址空间</li>
<li>缺点：1. I/O 指令类型少，一般只能对端口进行传送操作；2. <strong>程序设计灵活性差</strong>；3. 需要 CPU 提供存储器读/写、I/O 设备读/写两组控制信号，增加了控制逻辑电路的复杂性</li>
</ul>
</li>
</ul>
<h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><ul>
<li>按数据传送方式可分为<ul>
<li><strong>并行接口</strong>：一个字节或一个字所有位同时传送。</li>
<li><strong>串行接口</strong>：一位一位地传送。</li>
<li>这里指的是<strong>外设和接口一侧</strong>的传送方式，为了传输到主机和接口一侧，接口要完成数据格式转换。</li>
</ul>
</li>
<li>按主机访问I/O设备的控制方式可分为<ul>
<li>程序查询接口</li>
<li>中断接口</li>
<li>DMA 接口</li>
</ul>
</li>
<li>按功能选择的灵活性可分为<ul>
<li>可编程接口</li>
<li>不可编程接口</li>
</ul>
</li>
</ul>
<h2 id="I-O-方式"><a href="#I-O-方式" class="headerlink" title="I/O 方式"></a>I/O 方式</h2><h3 id="程序查询方式"><a href="#程序查询方式" class="headerlink" title="程序查询方式"></a>程序查询方式</h3><ul>
<li>优点：接口<strong>设计简单</strong>、设备量少。</li>
<li>缺点：CPU 在信息传送过程中要<strong>花费很多时间用于查询和等待</strong>，而且在一段时间内只能和一台外设交换信息，效率大大降低。</li>
<li>例题<ul>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211028211418243.png" alt="image-20211028211418243"></li>
</ul>
</li>
<li><strong>独占查询</strong>：CPU 100%的时间都在查询I/O状态，完全串行</li>
<li><strong>定时查询</strong>：在保证数据不丢失的情况下，每隔一段时间 CPU 就查询一次 I/O 状态。查询的间隔内 CPU 可以执行其他程序</li>
</ul>
<h3 id="中断系统"><a href="#中断系统" class="headerlink" title="中断系统"></a>中断系统</h3><h4 id="工作流程"><a href="#工作流程" class="headerlink" title="工作流程"></a>工作流程</h4><ol>
<li>中断请求</li>
</ol>
<ul>
<li>中断源向 CPU 发送中断请求信号。</li>
</ul>
<ol start="2">
<li>中断响应</li>
</ol>
<ul>
<li><strong>中断请求标记</strong>：<ul>
<li>为了区分不同的中断源，中断系统需对每个中断源设置<strong>中断请求标记触发器 INTR</strong>，当其状态为“1”时，表示中断源有请求。</li>
<li>这些触发器可组成<strong>中断请求标记寄存器</strong>，该寄存器可集中在CPU中，也可分散在各个中断源中。</li>
<li>对于<strong>外中断</strong>，CPU <strong>响应中断的时间</strong>是在每条<strong>指令执行阶段的结束前</strong>。</li>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211029131814925.png" alt="image-20211029131814925" style="zoom:80%;"></li>
</ul>
</li>
<li><strong>响应中断的条件</strong>：<ol>
<li>中断源有中断请求。</li>
<li>一条指令执行完毕，且没有更紧迫的任务。</li>
<li>允许中断：当前 PSW 的 IF（Interrupt Flag）为真<ul>
<li>IF=1 表示开中断（允许中断）；IF=0 表示关中断（不允许中断）</li>
<li>关中断的作用：实现<strong>原子操作</strong>（必须一次性做完的操作）</li>
<li>除非是不得不响应的非屏蔽中断（如掉电）</li>
</ul>
</li>
</ol>
</li>
<li><strong>中断判优</strong>：多个中断源同时提出请求时通过中断判优逻辑响应一个中断源。<ul>
<li>中断判优既可以用硬件实现，也可用软件实现：<ul>
<li>硬件实现是通过<strong>硬件排队器</strong>实现的，它既可以设置在 CPU 中，也可以分散在各个中断源中；</li>
<li>软件实现是通过<strong>查询程序</strong>实现的。（相比硬件更慢，通常使用硬件排队器）</li>
</ul>
</li>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211029132629325.png" alt="image-20211029132629325"></li>
<li><strong>优先级设置</strong>：<ol>
<li>硬件故障中断属于最高级，其次是软件中断；</li>
<li>非屏蔽中断优于可屏蔽中断；</li>
<li>DMA 请求优于 I/O 设备传送的中断请求</li>
<li>高速设备优于低速设备；</li>
<li>输入设备优于输出设备；</li>
<li>实时设备优于普通设备。</li>
</ol>
</li>
</ul>
</li>
</ul>
<ol start="3">
<li>中断处理</li>
</ol>
<ul>
<li><strong>中断隐指令</strong>：CPU 在检测到中断请求时自动完成的一系列动作<ul>
<li><strong>关中断</strong>。为了在保护现场期间不被新的中断打断，必须关中断，从而保证被中断的程序在中断服务程序执行完毕之后能接着正确地执行下去。</li>
<li><strong>保存断点</strong>。为了保证在中断服务程序执行完毕后能正确地返回到原来的程序，必须将原来程序的断点（即程序计数器（PC）的内容）保存起来。可以存入堆栈或指定单元。</li>
<li><strong>引出中断服务程序</strong>。引出中断服务程序的实质就是取出中断服务程序的入口地址并传送给程序计数器（PC）。<ul>
<li>软件向量法</li>
<li>硬件向量法<ul>
<li>由<strong>硬件</strong>产生指向<strong>中断向量</strong>的<strong>向量地址</strong></li>
<li><strong>中断向量</strong>指向<strong>中断服务程序</strong>的<strong>入口地址</strong></li>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211029204003689.png" alt="image-20211029204003689" style="zoom:80%;"></li>
</ul>
</li>
</ul>
</li>
<li>以及其他任务……</li>
</ul>
</li>
<li><strong>中断服务程序</strong>。<ul>
<li><strong>保护现场</strong>：保存通用寄存器和状态寄存器的内容（eg：保存ACC寄存器的值），以便返回原程序后可以恢复 CPU 环境。可使用堆栈，也可以使用特定存储单元。</li>
<li><strong>中断服务</strong>（设备服务）：主体部分，如通过程序控制需打印的字符代码送入打印机的缓冲存储器中（eg：中断服务的过程中有可能修改 ACC 寄存器的值）</li>
<li><strong>恢复现场</strong>：通过出栈指令或取数指令把之前保存的信息送回寄存器中（eg：把原程序算到一般的 ACC 值恢复原样）</li>
<li><strong>中断返回</strong>：通过中断返回指令回到原程序断点处。</li>
</ul>
</li>
</ul>
<h4 id="多重中断"><a href="#多重中断" class="headerlink" title="多重中断"></a>多重中断</h4><ul>
<li><p><strong>单重中断</strong>：执行中断服务程序时不响应新的中断请求。</p>
<ul>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211029205105146.png" alt="image-20211029205105146" style="zoom: 67%;">
</li>
</ul>
</li>
<li><p><strong>多重中断</strong>：又称<strong>中断嵌套</strong>，执行中断服务程序时可响应新的中断请求。</p>
<ul>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211029210138245.png" alt="image-20211029210138245" style="zoom:67%;"><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211029205642997.png" alt="image-20211029205642997"></li>
</ul>
</li>
<li><p>中断屏蔽技术：</p>
<ul>
<li><p>CPU 要具备多重中断的功能，须满足下列条件（主要用于多重中断）</p>
<ul>
<li>在中断服务程序中提前设置开中断指令。</li>
<li>优先级别高的中断源有权中断优先级别低的中断源。</li>
</ul>
</li>
<li><p>屏蔽字设置的规律：</p>
<ol>
<li><p>一般用“1”表示屏蔽，“0”表示正常申请。</p>
</li>
<li><p>每个中断源对应一个屏蔽字（在处理该中断源的中断服务程序时，屏蔽寄存器中的内容为该中断源对应的屏蔽字）。</p>
</li>
<li><p>屏蔽字中“1”越多，优先级越高。每个屏蔽字中至少有一个“1”（至少要能屏蔽自身的中断）。</p>
</li>
</ol>
</li>
<li><p>例题：</p>
<ul>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211029221003756.png" alt="image-20211029221003756"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="程序中断方式"><a href="#程序中断方式" class="headerlink" title="程序中断方式"></a>程序中断方式</h3><ul>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211029220829035.png" alt="image-20211029220829035"></li>
<li>例题：<ul>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211029221803157.png" alt="image-20211029221803157"></li>
</ul>
</li>
</ul>
<h3 id="DMA-方式"><a href="#DMA-方式" class="headerlink" title="DMA 方式"></a>DMA 方式</h3><h4 id="DMA-传送过程"><a href="#DMA-传送过程" class="headerlink" title="DMA 传送过程"></a>DMA 传送过程</h4><ul>
<li><p><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211029232153701.png" alt="image-20211029232153701"></p>
</li>
<li><p>DMA 控制器工作流程：</p>
<ul>
<li>CPU 向 DMA 控制器指明要<strong>输入还是输出</strong>；要传送<strong>多少数据</strong>；数据在<strong>主存、外设中的地址</strong>。</li>
<li>接受外设发出的 DMA 请求（外设传送一个字的请求），并向 CPU 发出<strong>总线请求</strong>。</li>
<li>CPU 响应此总线请求，发出总线响应信号，接管总线控制权，进入 DMA 操作周期。</li>
<li>确定传送数据的<strong>主存单元地址及长度</strong>，并能自动修改<strong>主存地址计数</strong>和<strong>传送长度计数</strong>。</li>
<li>规定数据在主存和外设间的<strong>传送方向</strong>，发出读写等控制信号，执行数据传送操作。</li>
<li>向 CPU 报告 DMA 操作的结束。</li>
</ul>
</li>
<li><p>DMA 组成：</p>
<ul>
<li>主存地址计数器：简称 AR，存放要交换数据的主存地址。</li>
<li>传送长度计数器：简称 WC，用来记录传送数据的长度，计数溢出时，数据即传送完毕，自动发中断请求信号。</li>
<li>数据缓冲寄存器：用于暂存每次传送的数据。</li>
<li>DMA 请求触发器：每当 I/O 设备准备好数据后给出一个控制信号，使 DMA 请求触发器置位。</li>
<li>控制/状态逻辑：由控制和时序电路及状态标志组成，用于指定传送方向，修改传送参数，并对DMA请求信号和CPU响应信号进行协调和同步。</li>
<li>中断机构：当一个数据块传送完毕后触发中断机构，向CPU提出中断请求。</li>
</ul>
</li>
<li><p>注：在 DMA 传送过程中，DMA 控制器将接管 CPU 的地址总线、数据总线和控制总线，CPU 的主存控制信号被禁止使用。而当 DMA 传送结束后，将恢复 CPU 的一切权利并开始执行其操作。</p>
</li>
<li><p>CPU 和 DMA 控制器访问主存可能产生冲突</p>
<ul>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211030223325881.png" alt="image-20211030223325881"></li>
</ul>
</li>
</ul>
<h4 id="DMA-传送方式"><a href="#DMA-传送方式" class="headerlink" title="DMA 传送方式"></a>DMA 传送方式</h4><ul>
<li>主存和 DMA 控制器之间有一条数据通路，因此主存和 I/O 设备之间交换信息时，不通过 CPU。但当 I/O 设备和 CPU 同时访问主存时，可能发生冲突，为了有效地使用主存，DMA 控制器与 CPU 通常采用以下 3 种方法使用主存。<ol>
<li>停止 CPU 访问主存<ul>
<li>优点：控制简单</li>
<li>缺点：CPU 处于不工作状态或保持状态未充分发挥 CPU 对主存的利用率</li>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211031092120253.png" alt="image-20211031092120253"></li>
</ul>
</li>
<li>DMA 与 CPU 交替访存<ul>
<li>一个 CPU 周期，分为 C1 和 C2 两个周期。C1 专供 DMA 访存，C2 专供 CPU 访存</li>
<li>优点：不需要总线使用权的申请、建立和归还过程</li>
<li>缺点：硬件逻辑更为复杂</li>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211031092135200.png" alt="image-20211031092135200"></li>
</ul>
</li>
<li>周期挪用（周期窃取）<ul>
<li>周期指<strong>存取周期</strong>。</li>
<li>DMA 访问主存有三种可能：<ul>
<li>CPU 此时不访存（不冲突）</li>
<li>CPU 正在访存（存取周期结束让出总线）</li>
<li>CPU 与 DMA 同时请求访存（I/O 访存优先）</li>
</ul>
</li>
<li><img src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/image-20211031092208256.png" alt="image-20211031092208256"></li>
</ul>
</li>
</ol>
</li>
</ul>
<h4 id="DMA-方式的特点"><a href="#DMA-方式的特点" class="headerlink" title="DMA 方式的特点"></a>DMA 方式的特点</h4><ul>
<li>主存和 DMA 接口之间有一条直接数据通路。 由于 DMA 方式传送数据不需要经过 CPU，因此不必中断现行程序，<strong>I/O 与主机并行工作，程序和传送并行工作</strong>。</li>
<li>DMA 方式具有下列特点：<ul>
<li>它使主存与 CPU 的固定联系脱钩，主存既可被 CPU 访问，又可被外设访问。 </li>
<li>在数据块传送时，主存地址的确定、传送数据的计数等都由硬件电路直接实现。</li>
<li>主存中要开辟专用缓冲区，及时供给和接收外设的数据。</li>
<li>DMA 传送速度快，CPU 和外设并行工作，提高了系统效率。</li>
<li>DMA 在传送开始前要通过程序进行预处理，结束后要通过中断方式进行后处理。</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>中断</th>
<th>DMA</th>
</tr>
</thead>
<tbody><tr>
<td>数据传输</td>
<td>程序控制</td>
<td>硬件控制</td>
</tr>
<tr>
<td>中断请求</td>
<td>每次传送数据</td>
<td>只有后处理</td>
</tr>
<tr>
<td>响应时间</td>
<td>指令周期结束</td>
<td>总线空闲即可</td>
</tr>
<tr>
<td>场景</td>
<td>CPU 控制低速设备</td>
<td>MDA 控制器控制高速设备</td>
</tr>
<tr>
<td>优先级</td>
<td>低于 DMA</td>
<td>高于中断</td>
</tr>
<tr>
<td>异常处理</td>
<td>能处理异常事件</td>
<td>仅传送数据</td>
</tr>
</tbody></table>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://nephrencake.github.io">NephrenCake</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://nephrencake.github.io/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/">https://nephrencake.github.io/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://nephrencake.github.io" target="_blank">浅幽丶奈芙莲的个人博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-%E5%AE%8C%E7%BB%93%E7%9B%AE%E5%BD%95/%E4%BA%8Ced11.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-%E5%AE%8C%E7%BB%93%E7%9B%AE%E5%BD%95/"><img class="prev-cover" src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-%E5%AE%8C%E7%BB%93%E7%9B%AE%E5%BD%95/%E4%BA%8Ced11.jpg" onerror="onerror=null;src='/img/404.png'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">计算机组成原理-完结目录</div></div></a></div><div class="next-post pull-right"><a href="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part6/"><img class="next-cover" src="/2021/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-%E5%AE%8C%E7%BB%93%E7%9B%AE%E5%BD%95/%E4%BA%8Ced11.jpg" onerror="onerror=null;src='/img/404.png'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">计算机组成原理-Part6</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-Part7%E2%80%94%E2%80%94I-O-%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.</span> <span class="toc-text">计算机组成原理-Part7——I&#x2F;O 系统</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#I-O-%E7%B3%BB%E7%BB%9F%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">1.1.</span> <span class="toc-text">I&#x2F;O 系统基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E6%96%B9%E5%BC%8F"><span class="toc-number">1.1.2.</span> <span class="toc-text">控制方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E5%9F%BA%E6%9C%AC%E7%BB%84%E6%88%90"><span class="toc-number">1.1.3.</span> <span class="toc-text">系统基本组成</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E9%83%A8%E8%AE%BE%E5%A4%87"><span class="toc-number">1.2.</span> <span class="toc-text">外部设备</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E8%A7%88"><span class="toc-number">1.2.1.</span> <span class="toc-text">总览</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E5%99%A8"><span class="toc-number">1.2.2.</span> <span class="toc-text">显示器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E6%A0%87%E5%87%86%EF%BC%88%E8%80%83%E7%82%B9%EF%BC%9A%E6%98%BE%E5%AD%98%E7%9A%84%E8%AE%A1%E7%AE%97%EF%BC%89"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">性能标准（考点：显存的计算）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%B4%E6%9E%81%E5%B0%84%E7%BA%BF%E7%AE%A1%E6%98%BE%E7%A4%BA%E5%99%A8%EF%BC%88%E8%80%83%E7%82%B9%EF%BC%9A%E5%AD%97%E7%AC%A6%E7%82%B9%E9%98%B5%E7%9A%84%E5%AD%98%E5%82%A8%EF%BC%89"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">阴极射线管显示器（考点：字符点阵的存储）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%93%E5%8D%B0%E6%9C%BA"><span class="toc-number">1.2.3.</span> <span class="toc-text">打印机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%83%A8%E5%AD%98%E5%82%A8%E5%99%A8"><span class="toc-number">1.2.4.</span> <span class="toc-text">外部存储器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A3%81%E8%A1%A8%E9%9D%A2%E5%AD%98%E5%82%A8%E5%99%A8%E7%AE%80%E4%BB%8B"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">磁表面存储器简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A3%81%E7%9B%98%E8%AE%BE%E5%A4%87"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">磁盘设备</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%84%E6%88%90"><span class="toc-number">1.2.4.2.1.</span> <span class="toc-text">组成</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">1.2.4.2.2.</span> <span class="toc-text">性能指标</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A3%81%E7%9B%98%E5%9C%B0%E5%9D%80"><span class="toc-number">1.2.4.2.3.</span> <span class="toc-text">磁盘地址</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A1%AC%E7%9B%98%E7%9A%84%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B"><span class="toc-number">1.2.4.2.4.</span> <span class="toc-text">硬盘的工作过程</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A3%81%E7%9B%98%E9%98%B5%E5%88%97"><span class="toc-number">1.2.4.3.</span> <span class="toc-text">磁盘阵列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%89%E7%9B%98%E5%AD%98%E5%82%A8%E5%99%A8"><span class="toc-number">1.2.4.4.</span> <span class="toc-text">光盘存储器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98"><span class="toc-number">1.2.4.5.</span> <span class="toc-text">固态硬盘</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#I-O-%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.3.</span> <span class="toc-text">I&#x2F;O 接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD"><span class="toc-number">1.3.1.</span> <span class="toc-text">主要功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E4%B8%8E%E5%8E%9F%E7%90%86"><span class="toc-number">1.3.2.</span> <span class="toc-text">结构与原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#I-O-%E7%AB%AF%E5%8F%A3"><span class="toc-number">1.3.3.</span> <span class="toc-text">I&#x2F;O 端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB"><span class="toc-number">1.3.4.</span> <span class="toc-text">分类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#I-O-%E6%96%B9%E5%BC%8F"><span class="toc-number">1.4.</span> <span class="toc-text">I&#x2F;O 方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E6%9F%A5%E8%AF%A2%E6%96%B9%E5%BC%8F"><span class="toc-number">1.4.1.</span> <span class="toc-text">程序查询方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E6%96%AD%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.4.2.</span> <span class="toc-text">中断系统</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">工作流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E9%87%8D%E4%B8%AD%E6%96%AD"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">多重中断</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E4%B8%AD%E6%96%AD%E6%96%B9%E5%BC%8F"><span class="toc-number">1.4.3.</span> <span class="toc-text">程序中断方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DMA-%E6%96%B9%E5%BC%8F"><span class="toc-number">1.4.4.</span> <span class="toc-text">DMA 方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DMA-%E4%BC%A0%E9%80%81%E8%BF%87%E7%A8%8B"><span class="toc-number">1.4.4.1.</span> <span class="toc-text">DMA 传送过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DMA-%E4%BC%A0%E9%80%81%E6%96%B9%E5%BC%8F"><span class="toc-number">1.4.4.2.</span> <span class="toc-text">DMA 传送方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DMA-%E6%96%B9%E5%BC%8F%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">1.4.4.3.</span> <span class="toc-text">DMA 方式的特点</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By NephrenCake</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">这里是浅幽丶奈芙莲的个人博客~</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>